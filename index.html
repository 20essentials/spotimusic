<!DOCTYPE html><script type="module">
  import AtroposComponent from './modules/atropos.js';
  import { setAnimation } from './modules/setAnimation.js';
  customElements.define('atropos-component', AtroposComponent);

  class CoverCard extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({ mode: 'open' });
    }

    static get styles() {
      return /* css */ `
        :host {
          display: block;
          position: absolute;
          inset: 0;
          bottom: -10px;
          background: #0004;
          z-index: 50;
          backdrop-filter: blur(0.5vmax);
        }

        atropos-component {
          --size: 25vmax;
          width: var(--size);
          height: var(--size);
          z-index: 5;
          padding: 0;
          border: 0;
          position: absolute;
          left: calc(50% - var(--size) / 2);
          top: calc(50% - var(--size) / 2);


          & .cover {
            max-width: var(--size);
            max-height: var(--size);
            z-index: 10;
            position: absolute;
            top: 0;
            left: 0;
            

            &::after {
              content: "";
              background: url("./assets/cover-texture.avif");
              width: var(--size);
              height: var(--size);
              background-size: var(--size);
              top: 0;
              left: 0;
              background-position: center;
              mix-blend-mode: screen;
              opacity: 15%;
              position: absolute;
              pointer-events: none;
            }

            &::before {
              content: "";
              width: calc(var(--size) + 60px);
              height: calc(var(--size) + 60px);
              background: radial-gradient(#0000 50%, #000);
              background-size: cover;
              background-position: center;
              position: absolute;
              mix-blend-mode: overlay;
              z-index: 10;
              top: 0;
              left: 0;
              pointer-events: none;
            }
          }

 
          img {
            width: var(--size);
            height: var(--size);
            
          }
        }
      `;
    }

    connectedCallback() {
      this.image = this.getAttribute('src');
      this.render();
      this.addEventListener('click', () => this.remove());

      const atroposComponent = this.shadowRoot.querySelector('atropos-component');
      setAnimation(atroposComponent);
    }

    render() {
      this.shadowRoot.innerHTML = /* html */ `
        <style>${CoverCard.styles}</style>
        <atropos-component>
          <img src="${this.image}" alt="Cover Single Image">
          <div class="cover"></div>
        </atropos-component>
      `;
    }
  }

  customElements.define('cover-card', CoverCard);
</script>  <html lang="en" data-astro-cid-upqv7g22> <head><meta charset="utf-8"><link rel="shortcut icon" href="./assets/favicon.webp" type="image/x-icon"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>SpotiMusic Player</title><link rel="stylesheet" href="index.CMx3cZY_.css"></head> <body data-astro-cid-upqv7g22>  <div class="container" data-astro-cid-j7pv25f6> <div class="content-container" data-astro-cid-j7pv25f6> <div class="sidebar" data-astro-cid-j7pv25f6> <div class="container" data-astro-cid-6b5ihhfi> <div class="top-sidebar" data-astro-cid-6b5ihhfi> <button class="btn" data-astro-cid-6b5ihhfi> <input type="text" maxlength="15" placeholder="Seach" data-astro-cid-6b5ihhfi> </button> </div> <div class="main-sidebar" data-astro-cid-6b5ihhfi> <div class="container" data-astro-cid-k36g45pi> <div class="playlist-container" data-astro-cid-k36g45pi> <div class="search-container" data-astro-cid-k36g45pi> <span class="text" data-astro-cid-k36g45pi><svg width="0.8vmax" color="#ddd" data-astro-cid-k36g45pi data-encore-id="icon" role="img" aria-hidden="true" viewBox="0 0 16 16" class="Svg-sc-ytk21e-0 cAMMLk" fill="currentColor"> <path d="M15 14.5H5V13h10v1.5zm0-5.75H5v-1.5h10v1.5zM15 3H5V1.5h10V3zM3 3H1V1.5h2V3zm0 11.5H1V13h2v1.5zm0-5.75H1v-1.5h2v1.5z"></path> </svg> Playlists</span> </div> <div class="playlist" data-astro-cid-k36g45pi> <aside class="playlist-item" data-id="instrumental" data-color="#0dbce7" data-astro-cid-4ht3nsfd> <img src="https://20essentials.github.io/tron-soundtrack/assets/n1.avif" alt="Instrumental" data-astro-cid-4ht3nsfd> <div class="data" data-astro-cid-4ht3nsfd> <strong class="title" data-astro-cid-4ht3nsfd>Instrumental</strong> <div class="subtitle-container" data-astro-cid-4ht3nsfd> <svg width="0.7vmax" color="springgreen" data-astro-cid-4ht3nsfd data-encore-id="icon" role="img" aria-hidden="false" class="Svg-sc-ytk21e-0 kLkTcI cSWBDsMjkH62GXIXo6mQ" viewBox="0 0 16 16"> <title>Fijada</title> <path fill="currentColor" d="M8.822.797a2.72 2.72 0 0 1 3.847 0l2.534 2.533a2.72 2.72 0 0 1 0 3.848l-3.678 3.678-1.337 4.988-4.486-4.486L1.28 15.78a.75.75 0 0 1-1.06-1.06l4.422-4.422L.156 5.812l4.987-1.337L8.822.797z"></path> </svg> <span class="subtitle" data-astro-cid-4ht3nsfd>Playlist - I</span> </div> </div> </aside><aside class="playlist-item" data-id="alternativerock" data-color="#ff0200" data-astro-cid-4ht3nsfd> <img src="https://20essentials.github.io/noisestorm-ost/assets/n1.avif" alt="Alternative Rock" data-astro-cid-4ht3nsfd> <div class="data" data-astro-cid-4ht3nsfd> <strong class="title" data-astro-cid-4ht3nsfd>Alternative Rock</strong> <div class="subtitle-container" data-astro-cid-4ht3nsfd> <svg width="0.7vmax" color="springgreen" data-astro-cid-4ht3nsfd data-encore-id="icon" role="img" aria-hidden="false" class="Svg-sc-ytk21e-0 kLkTcI cSWBDsMjkH62GXIXo6mQ" viewBox="0 0 16 16"> <title>Fijada</title> <path fill="currentColor" d="M8.822.797a2.72 2.72 0 0 1 3.847 0l2.534 2.533a2.72 2.72 0 0 1 0 3.848l-3.678 3.678-1.337 4.988-4.486-4.486L1.28 15.78a.75.75 0 0 1-1.06-1.06l4.422-4.422L.156 5.812l4.987-1.337L8.822.797z"></path> </svg> <span class="subtitle" data-astro-cid-4ht3nsfd>Playlist - AR</span> </div> </div> </aside><aside class="playlist-item" data-id="progressivepop" data-color="#9708ef" data-astro-cid-4ht3nsfd> <img src="https://20essentials.github.io/bruno-mars/assets/n3.avif" alt="Progressive Pop" data-astro-cid-4ht3nsfd> <div class="data" data-astro-cid-4ht3nsfd> <strong class="title" data-astro-cid-4ht3nsfd>Progressive Pop</strong> <div class="subtitle-container" data-astro-cid-4ht3nsfd> <svg width="0.7vmax" color="springgreen" data-astro-cid-4ht3nsfd data-encore-id="icon" role="img" aria-hidden="false" class="Svg-sc-ytk21e-0 kLkTcI cSWBDsMjkH62GXIXo6mQ" viewBox="0 0 16 16"> <title>Fijada</title> <path fill="currentColor" d="M8.822.797a2.72 2.72 0 0 1 3.847 0l2.534 2.533a2.72 2.72 0 0 1 0 3.848l-3.678 3.678-1.337 4.988-4.486-4.486L1.28 15.78a.75.75 0 0 1-1.06-1.06l4.422-4.422L.156 5.812l4.987-1.337L8.822.797z"></path> </svg> <span class="subtitle" data-astro-cid-4ht3nsfd>Playlist - PP</span> </div> </div> </aside><aside class="playlist-item" data-id="melodicrock" data-color="#2ab240" data-astro-cid-4ht3nsfd> <img src="https://20essentials.github.io/twenty-one-pilots-ost/assets/n2.avif" alt="Melodic Rock" data-astro-cid-4ht3nsfd> <div class="data" data-astro-cid-4ht3nsfd> <strong class="title" data-astro-cid-4ht3nsfd>Melodic Rock</strong> <div class="subtitle-container" data-astro-cid-4ht3nsfd> <svg width="0.7vmax" color="springgreen" data-astro-cid-4ht3nsfd data-encore-id="icon" role="img" aria-hidden="false" class="Svg-sc-ytk21e-0 kLkTcI cSWBDsMjkH62GXIXo6mQ" viewBox="0 0 16 16"> <title>Fijada</title> <path fill="currentColor" d="M8.822.797a2.72 2.72 0 0 1 3.847 0l2.534 2.533a2.72 2.72 0 0 1 0 3.848l-3.678 3.678-1.337 4.988-4.486-4.486L1.28 15.78a.75.75 0 0 1-1.06-1.06l4.422-4.422L.156 5.812l4.987-1.337L8.822.797z"></path> </svg> <span class="subtitle" data-astro-cid-4ht3nsfd>Playlist - MR</span> </div> </div> </aside><aside class="playlist-item" data-id="englishpop" data-color="#dccf08" data-astro-cid-4ht3nsfd> <img src="https://20essentials.github.io/william-james/assets/n1.avif" alt="English Pop" data-astro-cid-4ht3nsfd> <div class="data" data-astro-cid-4ht3nsfd> <strong class="title" data-astro-cid-4ht3nsfd>English Pop</strong> <div class="subtitle-container" data-astro-cid-4ht3nsfd> <svg width="0.7vmax" color="springgreen" data-astro-cid-4ht3nsfd data-encore-id="icon" role="img" aria-hidden="false" class="Svg-sc-ytk21e-0 kLkTcI cSWBDsMjkH62GXIXo6mQ" viewBox="0 0 16 16"> <title>Fijada</title> <path fill="currentColor" d="M8.822.797a2.72 2.72 0 0 1 3.847 0l2.534 2.533a2.72 2.72 0 0 1 0 3.848l-3.678 3.678-1.337 4.988-4.486-4.486L1.28 15.78a.75.75 0 0 1-1.06-1.06l4.422-4.422L.156 5.812l4.987-1.337L8.822.797z"></path> </svg> <span class="subtitle" data-astro-cid-4ht3nsfd>Playlist - EP</span> </div> </div> </aside><aside class="playlist-item" data-id="bluerock" data-color="#f007c3" data-astro-cid-4ht3nsfd> <img src="https://20essentials.github.io/zeromancer-ost/assets/n1.avif" alt="Blue Rock" data-astro-cid-4ht3nsfd> <div class="data" data-astro-cid-4ht3nsfd> <strong class="title" data-astro-cid-4ht3nsfd>Blue Rock</strong> <div class="subtitle-container" data-astro-cid-4ht3nsfd> <svg width="0.7vmax" color="springgreen" data-astro-cid-4ht3nsfd data-encore-id="icon" role="img" aria-hidden="false" class="Svg-sc-ytk21e-0 kLkTcI cSWBDsMjkH62GXIXo6mQ" viewBox="0 0 16 16"> <title>Fijada</title> <path fill="currentColor" d="M8.822.797a2.72 2.72 0 0 1 3.847 0l2.534 2.533a2.72 2.72 0 0 1 0 3.848l-3.678 3.678-1.337 4.988-4.486-4.486L1.28 15.78a.75.75 0 0 1-1.06-1.06l4.422-4.422L.156 5.812l4.987-1.337L8.822.797z"></path> </svg> <span class="subtitle" data-astro-cid-4ht3nsfd>Playlist - BR</span> </div> </div> </aside><aside class="playlist-item" data-id="electronic" data-color="#08d437" data-astro-cid-4ht3nsfd> <img src="https://20essentials.github.io/spider-man-soundtrack/assets/n1.avif" alt="Electronic" data-astro-cid-4ht3nsfd> <div class="data" data-astro-cid-4ht3nsfd> <strong class="title" data-astro-cid-4ht3nsfd>Electronic</strong> <div class="subtitle-container" data-astro-cid-4ht3nsfd> <svg width="0.7vmax" color="springgreen" data-astro-cid-4ht3nsfd data-encore-id="icon" role="img" aria-hidden="false" class="Svg-sc-ytk21e-0 kLkTcI cSWBDsMjkH62GXIXo6mQ" viewBox="0 0 16 16"> <title>Fijada</title> <path fill="currentColor" d="M8.822.797a2.72 2.72 0 0 1 3.847 0l2.534 2.533a2.72 2.72 0 0 1 0 3.848l-3.678 3.678-1.337 4.988-4.486-4.486L1.28 15.78a.75.75 0 0 1-1.06-1.06l4.422-4.422L.156 5.812l4.987-1.337L8.822.797z"></path> </svg> <span class="subtitle" data-astro-cid-4ht3nsfd>Playlist - E</span> </div> </div> </aside> </div> </div> </div> </div> </div> </div> <div class="content" data-astro-cid-j7pv25f6> <div class="container" data-astro-cid-aqhblxhm> <list-header></list-header> <script type="module">
  import { formatTime, convertToSeconds } from './modules/formatTime.js';

  class ListHeader extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({ mode: 'open' });
      this.currentIndex = 0;
    }

    static get styles() {
      return /* css */ `
        :host {
          mix-blend-mode: normal;
          z-index: 5;
        }

        .texting-strong {
          font-size: 1.5vmax;

          @media (width <= 1111px) and (orientation: portrait) {
            font-size: 1.1vmax;
          }
        }

        .container-anchors {
          position: absolute;
          top: 1.5vmax;
          right: 1.5vmax;
          display: flex;
          gap: 0.5vmax;
          
          button {
            width: 2.5vmax;
            height: 2.5vmax;
            border: none;
            outline: none;
            margin: 0;
            padding: 0;
            border-radius: 50%;
            display: flex;
            flex-wrap: wrap;
            place-content: center;
            text-align: center;
            cursor: pointer;
            background: color-mix(in srgb, var(--theme-color) 50%, black 30%);
            backdrop-filter: blur(5px);
            transition: opacity .3s ease;

            &:active {
              opacity: 0.5;
            }

            img {
              pointer-events: none;
              --s-image: 1.9vmax;
              width: var(--s-image);
              height: var(--s-image);
            }
          }
        }

        header {
          display: flex;
          flex-direction: column;
          padding: 0.5vmax;
          position: relative;
          
          
          & .data {
            display: flex;
            gap: 0 1.2vmax;
            padding: 1.3vmax;

            & .cover {
              --size: 12vmax;
              width: var(--size);
              height: var(--size);
              border-radius: 0.2vmax;
              box-shadow:
                0 4px 1vmax #0008,
                0 0 1vmax #000a;
              background-color: #fff1;
            }

            & .avatar {
              --size: 1vmax;
              width: var(--size);
              height: var(--size);
              background-image: url("./assets/favicon.webp");
              background-size: cover;
              border-radius: 50%;
            }

            .esconder {
              @media (width <= 1111px) and (orientation: portrait) {
                display: none;
              }
            }

            & .info {
              display: flex;
              flex-direction: column;
              justify-content: end;
              font-family: var(--default-font);

              & .row {
                display: grid;
                grid-auto-flow: column;
                justify-content: start;
                gap: 0.5vmax;
                align-items: center;
              }

              & h1 {
                margin: 0;
                font-weight: 800;
                letter-spacing: -0.1vmax;
                font-size: 3.5vmax;

                  @media (width <= 1111px) and (orientation: portrait) {
                    font-size: 2vmax;
                    overflow-wrap: anywhere;
                  }
              }

              & .total-duration {
                color: var(--dark-textcolor);

                @media (width <= 1111px) {
                  filter: brightness(200%);
                }
              }

              .info-subtitle,
              .total-duration {
                font-size: 0.95vmax;
              }
            }
          }
        }
      `;
    }

    setData(title, songs) {
      const slug = title.toLowerCase().replaceAll(' ', '');
      const total = songs.length;
      const duration = songs
        .map(song => convertToSeconds(song.duration))
        .reduce((first, acc) => first + acc, 0);
      const [min] = formatTime(duration).split(':');
      const time = `${min} min `;

      this.shadowRoot.querySelector('h1').textContent = title;
      this.shadowRoot.querySelector('.info-subtitle').textContent =
        `Spotimusic · ${total} canciones,`;
      this.shadowRoot.querySelector('.total-duration').textContent =
        `${time} de duración aproximadamente`;

      setTimeout(() => {
        const result = `.playlist-item[data-id=${slug}] img`;
        this.shadowRoot.querySelector('img.cover').src =
          document.querySelector(result)?.src;
      }, 20);
    }

    connectedCallback() {
      this.render();
      const prev = this.shadowRoot.querySelector('.prev-list');
      const next = this.shadowRoot.querySelector('.next-list');
      const playlistItems = document.querySelectorAll('.playlist-item');
      const slugs = [...playlistItems].map(playlist => playlist.dataset.id);
      const { length } = playlistItems;

      function clickOnPlaylist(targetIndex) {
        const slug = slugs[targetIndex];
        const theTarget = document.querySelector(
          `.playlist-item[data-id="${slug}"]`
        );
        theTarget.click();
      }

      prev?.addEventListener('click', () => {
        const prevIndex = (this.currentIndex - 1 + length) % length;
        clickOnPlaylist(prevIndex);
        this.currentIndex = prevIndex;
      });

      next?.addEventListener('click', () => {
        const nextIndex = (this.currentIndex + 1) % length;
        clickOnPlaylist(nextIndex);
        this.currentIndex = nextIndex;
      });
    }

    render() {
      this.shadowRoot.innerHTML = /* html */ `
        <style>${ListHeader.styles}</style>
        <header>
          <div class="data">
            <img class="cover" src="./assets/transparent.png" alt="Cover Image">
            <div class="info">
              <strong class="texting-strong">Playlist</strong>
              <h1 class="texting-h1">Electronic</h1>
              <div class="row">
                <div class="avatar esconder"></div>
                <span class="info-subtitle esconder">Spotimusic · 20 canciones,</span>
                <span class="total-duration">80 min de duración aproximadamente</span>
              </div>
            </div>
          </div>
          <aside class="container-anchors">
            <button class='prev-list' >
              <img src='./assets/prev.svg' alt='prev' />
            </button>
            <button class='next-list' >
              <img src='./assets/next.svg' alt='next' />
            </button>
          </aside>
        </header>
      `;
    }
  }

  customElements.define('list-header', ListHeader);
</script> <div class="song playlist" data-astro-cid-mlamalio> <script type="module">
  import { setAnimation } from './modules/setAnimation.js';

  class SongItem extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({ mode: 'open' });
    }

    static get styles() {
      return /* css */ `
        .row-item {
          display: grid;
          grid-template-columns: var(--playlist-format);
          font-family: var(--default-font);
          align-items: center;
          padding: 0.25vmax 0.5vmax;
          border-radius: calc(var(--pad-gap) / 2);
          user-select: none;

          div:nth-child(4),
          div:nth-child(5) {
            text-align: center;
          }

          &:hover {
            background: #ffffff15;
            cursor: pointer;
          }
        }

        .text {
          font-size:1vmax;
        }

        .esconder {
          @media (width <= 1111px) and (orientation: portrait) {
            display: none;
          }
        }

        .title-container {
          display: flex;
          align-items: center;
          gap: 1vmax;

          & img {
            --size: 3.5vmax;
            width: var(--size);
            height: var(--size);
            border-radius: calc(var(--pad-gap) / 2);

            @media (width <= 800px) and (orientation: landscape) {
              --size: 2.5vmax;
            }
          }

          & .group {
            display: inline-flex;
            flex-direction: column;

            & .artist {
              color: var(--dark-textcolor);

              .row-item:hover & {
                color: #fff;
              }
            }
          }
        }
      `;
    }

    connectedCallback() {
      this.slug = this.getAttribute('slug');
      this.title = this.getAttribute('title');
      this.artist = this.getAttribute('artist');
      this.album = this.getAttribute('album');
      this.date = this.getAttribute('date');
      this.duration = this.getAttribute('duration');
      this.index = Number(this.getAttribute('index'));
      this.urlPoster = this.getAttribute('urlPoster');
      this.urlSong = this.getAttribute('urlSong');
      this.image = this.urlPoster;
      this.thumb = this.urlPoster;
      this.render();
      const rowItem = this.shadowRoot.querySelector('.row-item');
      setTimeout(() => setAnimation(rowItem, 'FadeMove'), this.index * 25);
    }

    getData() {
      return {
        index: this.index,
        album: this.album,
        artist: this.artist,
        date: this.date,
        duration: this.duration,
        slug: this.slug,
        title: this.title,
        urlPoster: this.urlPoster,
        urlSong: this.urlSong
      };
    }

    render() {
      this.shadowRoot.innerHTML = /* html */ `
        <style>${SongItem.styles}</style>
        <div class="row-item" data-id=${this.index}>
          <div class="num text">${(this.index + 1).toString().padStart(2, '0')}</div>
          <div class="title-container">
            <img class="img-thumb" src=${this.thumb} alt=${this.title}>
            <div class="group">
              <div class="text">${this.title}</div>
              <div class="artist text">${this.artist}</div>
            </div>
          </div>
          <div class="text esconder">${this.album}</div>
          <div class="text esconder">${this.date.substring(0, 10)}</div>
          <div class="text">${this.duration}</div>
        </div>
      `;
    }
  }

  customElements.define('song-item', SongItem);
</script> <header data-astro-cid-mlamalio> <div class="cell" data-astro-cid-mlamalio>#</div> <div class="cell" data-astro-cid-mlamalio>Título</div> <div class="cell esconder" data-astro-cid-mlamalio>Álbum</div> <div class="cell esconder" data-astro-cid-mlamalio>Fecha en la que se añadió</div> <div class="cell centrar" data-astro-cid-mlamalio><svg width="1em" height="1em" viewBox="0 0 16 16" data-astro-cid-mlamalio data-icon="clock">  <symbol id="ai:local:clock"><path fill="currentColor" d="M8 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13zM0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8z"/><path fill="currentColor" d="M8 3.25a.75.75 0 0 1 .75.75v3.25H11a.75.75 0 0 1 0 1.5H7.25V4A.75.75 0 0 1 8 3.25z"/></symbol><use xlink:href="#ai:local:clock"></use>  </svg></div> <div class="cell" data-astro-cid-mlamalio></div> </header> <hr data-astro-cid-mlamalio> </div> </div> </div> </div> <div class="player" data-astro-cid-j7pv25f6> <div class="container" data-astro-cid-lxeybmsx> <script type="module">
  const addCoverCard = link => {
    const existentCoverCard = document.querySelector('cover-card');
    if (existentCoverCard) existentCoverCard.remove();

    const coverCard = document.createElement('cover-card');
    coverCard.setAttribute('src', link);
    document.body.append(coverCard);
  };

  const image = document.querySelector('.song-info-container img');
  image.addEventListener('click', () => addCoverCard(image.src));

  document.addEventListener('player:update-info', ({ detail }) => {
    const {
      songData: { title, artist, urlPoster, slug, album },
      autoplay
    } = detail;

    const container = document.querySelector('.song-info-container');
    const titleTag = container.querySelector('.title');
    const artistTag = container.querySelector('.artist');
    const imageTag = container.querySelector('img');

    titleTag.textContent = title;
    artistTag.textContent = artist;
    imageTag.src = urlPoster;
    imageTag.alt = title;
    document.body.style.setProperty('--song-image', `url(${imageTag.src})`);

    autoplay && addCoverCard(imageTag.src);
  });
</script><div class="song-info-container" data-astro-cid-777hvpqc> <img src="./assets/transparent.png" class="left" data-astro-cid-777hvpqc> <div class="right" data-astro-cid-777hvpqc> <p class="title" data-astro-cid-777hvpqc>Scribble</p> <p class="artist" data-astro-cid-777hvpqc>UnderWorld</p> </div> </div> <script type="module">
  import { emitEvent } from './modules/emitter.js';

  class ProgressSlider extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({ mode: 'open' });
    }

    static get styles() {
      return /* css */ `

      :host {
        --progress: 0%;
      }

        * {
            cursor: pointer;
        }

      .bar-container {
        background: #555;
        height: 0.28vmax;
        border-radius: 1vmax;

        & .bar {
          
          width: var(--progress);
          height: 100%;
          background-color: var(--theme-color);
          transition: background-color .2s ease;
          position: relative;
          border-radius: 1vmax;

          &::before {
            content: '';
            --circle-size: 0.8vmax;
            width: var(--circle-size);
            height: var(--circle-size);
            position: absolute;
            top: 50%;
            transform: translateX(40%) translateY(-50%);
            right: 0%;
            background: #fff;
            border-radius: 50%;
            z-index: 50;
          }
        }

      }
      `;
    }

    connectedCallback() {
      this.setValue(this.getAttribute('value') ?? 0);
      this.render();
      const barContainer = this.shadowRoot.querySelector('.bar-container');
      barContainer.addEventListener('click', ({ offsetX }) => {
        const size = barContainer.getBoundingClientRect().width;
        const targetSize = Math.min(Math.max(0, offsetX), size);
        const percentage = ~~((targetSize * 100) / size);

        this.id === 'current-song' &&
          emitEvent('song:changetime', this, percentage);
        this.id === 'volume' && emitEvent('volume:change', this, percentage);

        this.setValue(percentage);
      });

      barContainer.addEventListener(
        'wheel',
        ({ deltaY }) => {
          const STEP = 0.05;
          const delta = deltaY < 0 ? STEP : -STEP;

          this.id === 'current-song' && emitEvent('song:slidetime', this, delta);
          this.id === 'volume' && emitEvent('volume:slide', this, delta);

          const oldValue = Number(this.getAttribute('value'));
          const value = Math.max(0, Math.min(oldValue + delta * 100, 100));

          this.setValue(value);
        },
        { passive: true }
      );

      //New

      let isDragging = false;

      barContainer.addEventListener('mousedown', event => {
        isDragging = true;
        updateProgress(event);
      });

      document.addEventListener('volumeNewProgress', ({ detail }) => {
        if (this.id === 'current-song') return;
        const { muteado, lastVolume } = detail;
        if (muteado) {
          this.setValue(0);
        } else {
          this.setValue(lastVolume * 100);
        }
      });

      document.addEventListener('mousemove', event => {
        if (!isDragging) return;
        updateProgress(event);
      });

      document.addEventListener('mouseup', () => {
        isDragging = false;
      });

      const updateProgress = ({ clientX }) => {
        const size = barContainer.getBoundingClientRect();
        const targetSize = Math.min(Math.max(0, clientX - size.left), size.width);
        const percentage = ~~((targetSize * 100) / size.width);

        this.id === 'current-song' &&
          emitEvent('song:changetime', this, percentage);
        this.id === 'volume' && emitEvent('volume:change', this, percentage);
        this.setValue(percentage);
      };
    }

    setValue(value) {
      this.setAttribute('value', value);
      this.style.setProperty('--progress', `${value}%`);
    }

    render() {
      this.shadowRoot.innerHTML = /* html */ `
        <style>${ProgressSlider.styles}</style>
        <div class="bar-container">
          <div class="bar"></div>
        </div>
      `;
    }
  }

  customElements.define('progress-slider', ProgressSlider);
</script>  <script type="module">
  import { MusicPlayer } from './modules/MusicPlayer.js';

  const getURLData = () => {
    const anchor =
      new URL(location.href).hash.toLowerCase().substring(1) || 'electronic-20';
    const [playlistName, id] = anchor.split('-');
    return {
      playlistName: playlistName ?? 'electronic',
      id: Number(id) ?? 20
    };
  };

  const { playlistName, id } = getURLData();
  const musicPlayer = new MusicPlayer(playlistName, id);

  const buttons = {
    play: document.querySelector('.song-player-container .play'),
    prev: document.querySelector('.song-player-container .prev'),
    next: document.querySelector('.song-player-container .next'),
    shuffle: document.querySelector('.song-player-container .shuffle'),
    repeat: document.querySelector('.song-player-container .repeat')
  };

  buttons.play.addEventListener('click', () => musicPlayer.play());
  buttons.prev.addEventListener('click', () => musicPlayer.prev());
  buttons.next.addEventListener('click', () => musicPlayer.next());
  buttons.repeat.addEventListener('click', () =>
    buttons.repeat.classList.toggle('disabled')
  );
  buttons.shuffle.addEventListener('click', () => {
    buttons.shuffle.classList.toggle('disabled');
    musicPlayer.sortSongs();
  });

  const playlistItems = document.querySelectorAll('.playlist-item');
  playlistItems.forEach(playlist => {
    playlist.addEventListener('click', async () => {
      const slug = playlist.dataset.id;
      const title = playlist.querySelector('.title').textContent;
      const songs = await musicPlayer.selectList(
        slug,
        title,
        playlist.dataset.color
      );
    });
  });

  const songPlaylist = document.querySelector('.song.playlist');
  songPlaylist.addEventListener('click', ev => {
    const isClick = ev.detail === 1;

    if (isClick) {
      const newSongs = [...document.querySelectorAll('song-item')].map(song =>
        song.getData()
      );
      musicPlayer.setSongs(newSongs);
      const rowItem = ev
        .composedPath()
        .find(tag => tag.classList?.contains('row-item'));
      let id = Number(rowItem.dataset?.id);

      let newIndex = id;
      if (musicPlayer.isShuffle) {
        newIndex = musicPlayer.songList.findIndex(song => song.index === id);
      }

      if (rowItem) {
        musicPlayer.prepare(newIndex);
        musicPlayer.play();
        musicPlayer.togglePlayPause(true);
      }
    }
  });
</script> <div class="song-player-container" data-astro-cid-aomgrfx3> <div class="buttons" data-astro-cid-aomgrfx3> <button class="shuffle disabled" data-astro-cid-aomgrfx3> <svg class="btn-icon" data-astro-cid-aomgrfx3 data-encore-id="icon" role="img" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor"> <path d="M13.151.922a.75.75 0 1 0-1.06 1.06L13.109 3H11.16a3.75 3.75 0 0 0-2.873 1.34l-6.173 7.356A2.25 2.25 0 0 1 .39 12.5H0V14h.391a3.75 3.75 0 0 0 2.873-1.34l6.173-7.356a2.25 2.25 0 0 1 1.724-.804h1.947l-1.017 1.018a.75.75 0 0 0 1.06 1.06L15.98 3.75 13.15.922zM.391 3.5H0V2h.391c1.109 0 2.16.49 2.873 1.34L4.89 5.277l-.979 1.167-1.796-2.14A2.25 2.25 0 0 0 .39 3.5z"></path> <path d="m7.5 10.723.98-1.167.957 1.14a2.25 2.25 0 0 0 1.724.804h1.947l-1.017-1.018a.75.75 0 1 1 1.06-1.06l2.829 2.828-2.829 2.828a.75.75 0 1 1-1.06-1.06L13.109 13H11.16a3.75 3.75 0 0 1-2.873-1.34l-.787-.938z"></path> </svg> </button> <button class="prev" data-astro-cid-aomgrfx3> <svg class="btn-icon" data-astro-cid-aomgrfx3 data-encore-id="icon" role="img" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor"> <path d="M3.3 1a.7.7 0 0 1 .7.7v5.15l9.95-5.744a.7.7 0 0 1 1.05.606v12.575a.7.7 0 0 1-1.05.607L4 9.149V14.3a.7.7 0 0 1-.7.7H1.7a.7.7 0 0 1-.7-.7V1.7a.7.7 0 0 1 .7-.7h1.6z"></path> </svg> </button> <button class="play circle" data-astro-cid-aomgrfx3> <div class="play" data-astro-cid-aomgrfx3> <svg class="btn-in-circle" data-astro-cid-aomgrfx3 xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z"></path></svg> </div> <div class="pause" hidden data-astro-cid-aomgrfx3> <svg class="btn-in-circle" data-astro-cid-aomgrfx3 xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"> <path fill="currentColor" d="M6 5h4v14H6zm8 0h4v14h-4z"></path> </svg> </div> </button> <button class="next" data-astro-cid-aomgrfx3> <svg class="btn-icon" data-astro-cid-aomgrfx3 data-encore-id="icon" fill="currentColor" role="img" aria-hidden="true" viewBox="0 0 16 16" class="Svg-sc-ytk21e-0 dYnaPI"> <path d="M12.7 1a.7.7 0 0 0-.7.7v5.15L2.05 1.107A.7.7 0 0 0 1 1.712v12.575a.7.7 0 0 0 1.05.607L12 9.149V14.3a.7.7 0 0 0 .7.7h1.6a.7.7 0 0 0 .7-.7V1.7a.7.7 0 0 0-.7-.7h-1.6z"></path> </svg> </button> <button class="repeat disabled" data-astro-cid-aomgrfx3> <svg class="btn-icon" data-astro-cid-aomgrfx3 data-encore-id="icon" role="img" aria-hidden="true" viewBox="0 0 16 16" fill="currentColor"> <path d="M0 4.75A3.75 3.75 0 0 1 3.75 1h8.5A3.75 3.75 0 0 1 16 4.75v5a3.75 3.75 0 0 1-3.75 3.75H9.81l1.018 1.018a.75.75 0 1 1-1.06 1.06L6.939 12.75l2.829-2.828a.75.75 0 1 1 1.06 1.06L9.811 12h2.439a2.25 2.25 0 0 0 2.25-2.25v-5a2.25 2.25 0 0 0-2.25-2.25h-8.5A2.25 2.25 0 0 0 1.5 4.75v5A2.25 2.25 0 0 0 3.75 12H5v1.5H3.75A3.75 3.75 0 0 1 0 9.75v-5z"></path> </svg> </button> </div> <div class="time-container" data-astro-cid-aomgrfx3> <time data-astro-cid-aomgrfx3>00:00</time> <progress-slider id="current-song" data-astro-cid-aomgrfx3></progress-slider> <time data-astro-cid-aomgrfx3>00:00</time> </div> </div> <div class="song-volume-container" data-astro-cid-243r45sf> <svg class="volume-icon" data-astro-cid-243r45sf xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"> <path fill="currentColor" d="m3.5 10.494l.257-.429l-.119-.07H3.5zm0-5.996v.5h.138l.12-.071zm5-2.998H9a.5.5 0 0 0-.757-.429zm0 11.992l-.257.429A.5.5 0 0 0 9 13.492zm-5-3.498h-2v1h2zm-2 0a.5.5 0 0 1-.5-.5H0c0 .83.672 1.5 1.5 1.5zm-.5-.5V5.498H0v3.998zm0-3.997a.5.5 0 0 1 .5-.499v-1a1.5 1.5 0 0 0-1.5 1.5zm.5-.499h2v-1h-2zm2.257-.071l5-2.998l-.514-.858l-5 2.998zM8 1.5v11.992h1V1.5zm.757 11.563l-5-2.998l-.514.858l5 2.998zM10 6v3h1V6zm2-2v7h1V4zm2-2v11h1V2z"></path> </svg> <svg class="volume-icon hidden" hidden data-astro-cid-243r45sf xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 15"> <path fill="currentColor" d="m3.5 10.494l.257-.429l-.119-.07H3.5zm0-5.996v.5h.138l.12-.071zm5-2.998H9a.5.5 0 0 0-.757-.429zm0 11.992l-.257.429A.5.5 0 0 0 9 13.492zm2.94-7.763l-.354-.353l-.707.707l.354.354zm2.12 3.534l.354.353l.707-.707l-.354-.353zm.708-2.826l.353-.354l-.707-.707l-.353.353zm-3.535 2.119l-.354.353l.707.707l.354-.353zM3.5 9.994h-2v1h2zm-2 0a.499.499 0 0 1-.5-.5H0c0 .83.671 1.5 1.5 1.5zm-.5-.5V5.498H0v3.998zm0-3.997c0-.276.223-.499.5-.499v-1c-.829 0-1.5.67-1.5 1.5zm.5-.499h2v-1h-2zm2.257-.071l5-2.998l-.514-.858l-5 2.998zM8 1.5v11.992h1V1.5zm.757 11.563l-5-2.998l-.514.858l5 2.998zm1.976-6.626l2.827 2.826l.707-.707l-2.828-2.827zm2.828-.708l-2.828 2.827l.707.707l2.828-2.826z"></path> </svg> <progress-slider class="slider" id="volume" value="100" data-astro-cid-243r45sf></progress-slider> </div> <script type="module">
  const [volume, mute] = document.querySelectorAll('.volume-icon');

  const toggleVolumeIcon = (value = null) => {
    if (value) {
      volume.classList.remove('hidden');
      mute.classList.add('hidden');
    } else if (value === false) {
      volume.classList.add('hidden');
      mute.classList.remove('hidden');
    }
  };

  document.addEventListener('click', e => {
    if (e.target === volume) {
      toggleVolumeIcon(false);
      document.dispatchEvent(
        new CustomEvent('mutedByClick', {
          composed: true,
          bubbles: true,
          detail: { muteado: true}
        })
      );
    }
    if (e.target === mute) {
      toggleVolumeIcon(true);
      document.dispatchEvent(
        new CustomEvent('mutedByClick', {
          composed: true,
          bubbles: true,
          detail: { muteado: false}
        })
      );
    }
  });

  document.addEventListener('volume:mute', () => toggleVolumeIcon(false));
  document.addEventListener('volume:unmute', () => toggleVolumeIcon(true));
</script> </div> </div> </div>   <!-- <script>
  window.addEventListener('resize', e => {
    document.title = `${window.innerWidth}`;
  });
</script> --></body></html>